<!DOCTYPE HTML>
<html>
<head>
<title>Reminiscens</title>
<script src="cordova-2.4.0.js"></script>
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="http://code.jquery.com/jquery.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<link href="css/StyleOverlay.css" rel="stylesheet">
<script src="js/GestioneOverlay.js"></script>
<link href="kendo/styles/kendo.common.min.css" rel="stylesheet" />
<link href="kendo/styles/kendo.default.min.css" rel="stylesheet" />
<script src="kendo/js/jquery.min.js"></script>
<script src="kendo/js/kendo.web.min.js"></script>
<script type="text/javascript" src="js/recorder.js"></script>
<script>
                $(document).ready(function() {
                    // create Editor from textarea HTML element with default set of tools
                    $("#editor").kendoEditor({
                        tools: [
                            "bold",
                "italic",
                "underline",
                "strikethrough",
                "foreColor",
                "justifyLeft",
                "justifyCenter",
                "justifyRight",
                "justifyFull",
                "insertUnorderedList",
                "insertOrderedList",
                "createLink",
                "unlink",
                "insertImage",
                        ],
                        imageBrowser: {
                           messages: {
                            dropFilesHere: "Drop files here"
                           },
                           transport: {
                                read: "/kendo/service/ImageBrowser/Read",
                                destroy: {
                                    url: "/kendo/service/ImageBrowser/Destroy",
                                    type: "POST"
                                },
                                create: {
                                    url: "/kendo/service/ImageBrowser/Create",
                                    type: "POST"
                                },
                                thumbnailUrl: "/kendo/service/ImageBrowser/Thumbnail",
                                uploadUrl: "/kendo/service/ImageBrowser/Upload",
                                imageUrl: "/kendo/service/ImageBrowser/images/{0}"
                           }
                        }
                    });
                });
				
				var pictureSource;   // picture source
    var destinationType; // sets the format of returned value 

    // Wait for Cordova to connect with the device
    //
    document.addEventListener("deviceready",onDeviceReady,false);

    // Cordova is ready to be used!
    //
    function onDeviceReady() {
        pictureSource=navigator.camera.PictureSourceType;
        destinationType=navigator.camera.DestinationType;
    }

				function capturePhoto() {
      // Take picture using device camera and retrieve image as base64-encoded string
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
        destinationType: destinationType.DATA_URL });
    }
	
	function onFail(message) {
      alert('Failed because: ' + message);
    }
	
	function onPhotoDataSuccess(imageData) {
		var editor = $("#editor").data("kendoEditor");
		var tmp = editor.value();
		
      editor.value(tmp + "<br/><img src='" + "data:image/jpeg;base64," + imageData + "' style='display:block;margin-left:auto;margin-right:auto;width:80px;height:80px' /><br/>");
    }


            </script>
<script>  	
     function onLoad(){
          document.addEventListener("deviceready", onDeviceReady, true);
     }
     function onDeviceReady(){
          navigator.notification.alert("PhoneGap is working!!");
     }
	function nascondiDiv()
	{
		document.getElementById("Foto").style.display="none";
		document.getElementById("Storie").style.display="none";
		document.getElementById("Canzoni").style.display="none";
		document.getElementById("Famosi").style.display="none";
	}
	$(document).ready(function() {
	$('.timeline').click(function(){
			nascondiDiv();
            var recupero_id = $(this).attr("id");  
			$("#lbldebug").text("Non ci sono ancora storie del " + recupero_id + "!");
			$("#FotoDelTempo").text("Com'era questo posto attorno al " + recupero_id);
			$("#TueFotoDelTempo").text("Le tue foto attorno al " + recupero_id);
			$("#StorieDelTempo").text("Che cosa succedeva nel " + recupero_id);
			$("#TueStorieDelTempo").text("Le tue storie nel " + recupero_id);
			if(recupero_id == 1950)
			{
				document.getElementById("Foto").style.display="inherit";
				document.getElementById("Results").style.display="inherit";
				document.getElementById("NoResults").style.display="none";
				$('.navbar li').removeClass('active');
				$('#liFoto').addClass('active');
			}
			else
			{
				document.getElementById("NoResults").style.display="inherit";
				document.getElementById("Results").style.display="none";
			}
        });
		/*applica la classe active al menù nav bar di bootstrap quando viene cliccato*/
		$('.navbar li').click(function(e) {
			$('.navbar li').removeClass('active');
			var $this = $(this);
			if (!$this.hasClass('active')) {
				$this.addClass('active');
			}
			var tmp = $this.attr("id");
			tmp = tmp.substring(2,tmp.length);
			if(tmp == "Raccontaci")
			{
				ApriOverlay();
			}
			else
			{
				nascondiDiv();
				document.getElementById(tmp).style.display="inherit";
			}
			
			e.preventDefault();
			});
		});
</script>
<script>
function timecode(ms) {
        var hms = {
          h: Math.floor(ms/(60*60*1000)),
          m: Math.floor((ms/60000) % 60),
          s: Math.floor((ms/1000) % 60)
        };
        var tc = []; // Timecode array to be joined with '.'

        if (hms.h > 0) {
          tc.push(hms.h);
        }

        tc.push((hms.m < 10 && hms.h > 0 ? "0" + hms.m : hms.m));
        tc.push((hms.s < 10  ? "0" + hms.s : hms.s));

        return tc.join(':');
      }
    
    
      $(document).ready(function() {
	  Recorder.initialize({
        swfSrc: "js/recorder.swf"
      });
	  });

      function record(){
		  $('#overlay').fadeOut('fast');
            $('#box').hide();
        Recorder.record({
          start: function(){
            //alert("recording starts now. press stop when youre done. and then play or upload if you want.");
          },
          progress: function(milliseconds){
			ApriOverlay();
			document.getElementById("record").onclick = function() {stop()};
			document.getElementById("record").src = "button/buttonStopRecording.jpg";
            document.getElementById("time").innerHTML = timecode(milliseconds);
          }
        });
		
      }
      
      function play(){
        Recorder.stop();
        Recorder.play({
          progress: function(milliseconds){
            document.getElementById("time").innerHTML = timecode(milliseconds);
          }
        });
      }
      	  
      function stop(){
		document.getElementById("record").onclick = function() {record()};
		document.getElementById("record").src = "button/buttonMicrofono.jpg";
        document.getElementById("play").style.visibility="visible";
		Recorder.stop();
      }
      
      function upload(){
		  //alert("ciao");
        Recorder.upload({
          url:        "http://localhost/sound",
          audioParam: "track[asset_data]",
          success: function(){
            alert("your file was uploaded!");
          }
        });
      }
</script>
<style>
body {
	background-color: #CCC;
	background-repeat: repeat-y;
}
#divRoot {
	width: 1020px;
	height: 750px;
	margin: auto;
	margin-top: 20px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border-radius: 10px 10px 10px 10px;
	background-color: #FFF;
	text-align: center;
}
input {
	float: left;
}
label {
	font-size: 24px;
}
#divRoot #centrale {
	background-color: #999;
	margin-top: 30px;
	height: 750px;
	text-align: center;
	-webkit-border-bottom-right-radius: 10px;
	-webkit-border-bottom-left-radius: 10px;
	-moz-border-radius-bottomright: 10px;
	-moz-border-radius-bottomleft: 10px;
	border-bottom-right-radius: 10px;
	border-bottom-left-radius: 10px;
}
/*allinemanto orrizzontale menù bootstrap*/
.navbar .nav, .navbar .nav > li {
	float: none;
	display: inline-block;
 *display:inline; /* ie7 fix */
 *zoom:1; /* hasLayout ie7 trigger */
	vertical-align: top;
}
.navbar-inner {
	text-align: center;
}
.divFoto {
	float: left;
	width: 450px;
	height: 550px;
	min-height: 100%;
	margin-left: 30px;
	margin-right: 30px;
	margin-top: 10px;
	margin-bottom: 30px;
	background-color: #CCC;
}
.immagini {
	margin: 5px 5px 5px 5px;
	position: relative;
	float: left;
}
.text {
	background: rgba(0,0,0,0.7);
	position: absolute;
	bottom: 0;
	left: 0;
	padding: 6px;
	display: block;
	color: #FFF;
}
#Foto img {
	margin: 5px 5px 5px 5px;
}
.round {
	border-radius: 0 80px 0 80px;
	opacity: 0.7;
	-webkit-transition: opacity 0.6s linear;
	-webkit-transition: all 0.6s ease-in-out;
	-moz-transition: all 0.6s ease-in-out;
	-o-transition: all 0.6s ease-in-out
}
.round:hover {
	border-radius: 0 0 0 0;
	opacity: 1
}
</style>
</head>
<body>
<div id="divRoot">
<input class="timeline" id="1940" type="image" src="button/1940.jpg">
<input class="timeline" id="1950" type="image" src="button/1950.jpg">
<input class="timeline" id="1960" type="image" src="button/1960.jpg">
<input class="timeline" id="1970" type="image" src="button/1970.jpg">
<input class="timeline" id="1980" type="image" src="button/1980.jpg">
<input class="timeline" id="1990" type="image" src="button/1990.jpg">
<br/>
<div id="centrale">
  <div id="NoResults" style="display:none;">
    <div style="background-color:#FFF; padding-bottom:30px; padding-top:100px;">
      <label id="lbldebug">Non ci sono ancora storie del 1950!</label>
    </div>
    <button style="margin-top:40px;" class="btn btn-large btn-primary" onClick="ApriOverlay();">Raccontaci una</button>
  </div>
  <div id="Results">
    <div class="navbar">
      <div class="navbar-inner">
        <ul class="nav">
          <li class="active" id="liFoto"><a href="#">Foto</a> </li>
          <li id="liStorie"><a href="#">Storie</a></li>
          <li id="liCanzoni"><a href="#">Canzoni</a></li>
          <li id="liFamosi"><a href="#">Famosi</a></li>
          <li id="liRaccontaci"><a href="#">Raccontaci</a></li>
        </ul>
      </div>
    </div>
    <div id="Foto">
      <div class="divFoto">
        <h3 id="TueFotoDelTempo">Le tue foto attorno al 1950</h3>
        <img src="img/comera1.jpg" /> <img src="img/comera3.jpg" /> <img src="img/comera2.jpg" /> </div>
      <div class="divFoto">
        <h3 id="TueFotoDelTempo">Le tue foto attorno al 1950</h3>
        <img src="img/tuefoto1.jpg" /> <img src="img/tuefoto2.jpg" /> <img src="img/tuefoto3.jpg" /> </div>
    </div>
    <div id="Storie" style="display:none;">
      <div class="divFoto">
        <h3 id="StorieDelTempo">Che cosa succedeva nel 1950</h3>
        <div class="immagini">
          <div class="text"> 26 gennaio 1950 - L'india diventa una repubblica </div>
          <img src="img/comera2.jpg" /> </div>
        <div class="immagini">
          <div class="text"> 2 ottobre 1950 - nasce il fumetto Charlie Brown, dalla penna di Charles M. Schulz... </div>
          <img src="img/comera1.jpg" /> </div>
        <div class="immagini">
          <div class="text"> 09 maggio 1950 - Nasce la comunità europea... </div>
          <img src="img/comera3.jpg" /> </div>
      </div>
      <div class="divFoto">
        <h3 id="TueStorieDelTempo">Le tue storie nel 1950</h3>
        <img src="img/tuefoto2.jpg" /> </div>
    </div>
  </div>
  <div id="Canzoni" style="display:none;">
    <h1>Quali erano le canzoni pi&uacute; popolari?</h1>
    <div class="divFoto" style="height:500px;">
      <iframe width="420" height="315" src="http://www.youtube.com/embed/CwE8GcoqEfw" frameborder="0" allowfullscreen style="margin-top:30px;"></iframe>
      <h3>Matia Bazar - Cavallo bianco</h3>
    </div>
    <div class="divFoto" style="height:500px;">
      <iframe width="420" height="315" src="http://www.youtube.com/embed/MKahSufwWS0" frameborder="0" allowfullscreen style="margin-top:30px;"></iframe>
      <h3>Patty Pravo - Pensiero Stupendo</h3>
    </div>
  </div>
  <div id="Famosi" style="display:none;">
    <div class="divFoto">
      <h3>Chi &eacute; nato all'epoca</h3>
      <img src="img/Loredana.jpg" class="round"/>
      <h4>Loredana Bert&eacute;</h4>
      <h6>Non &eacute; una signora, &eacute; costantemente</br>
        depressa e in lotta con il </br>
        mondo, difficile da gestire...</h6>
    </div>
    <div class="divFoto">
      <h3>Chi era famoso all'epoca</h3>
      <img src="img/DiPietro.jpg" class="round"/>
      <h4>Antonio di Pietro</h4>
      <h6>Nato il 2 ottobre 1950 a Montenero</br>
        di Bisaccia (CB), &eacute; l'uomo simbolo di</br>
        quella stagione politica che va...</h6>
    </div>
  </div>
</div>
<div class="overlay" id="overlay" style="display: none;"></div>
<!--contenuto overlay-->
<div id="box">
    <div style="background-color:#D5D5D5; padding-top:10px;">
      <div style="background-color:#A05152; padding-bottom:10px; padding-top:10px;">
        <label>raccontaci la tua storia</label>
      </div>
      <div style="margin-top:10px; color:#000; margin-left:20px; margin-right:20px;">
        <form>
          <div>
            <label for="titolo" style="float:left; margin-top:3px;">Titolo:</label>
            <input id="titolo" style="float:left; margin-left:31px;" class="input-xxlarge" type="text"/>
          </div>
          <br/>
          <br/>
          <div>
            <label for="quando" style="float:left;margin-top:3px;">Quando:</label>
            <input id="quando"  style="float:left; margin-left:3px;" type="text" class="input-xlarge"/>
            <label for="dove" style="float:left;margin-top:3px; margin-left:10px;">Dove:</label>
            <input id="dove" style="float:left; margin-left:3px;" type="text" class="input-xlarge"/>
          </div>
        </form>
      </div>
      <!--<button style="margin-bottom:10px;" class="btn btn-primary" onClick="capturePhoto();">Capture Foto</button>
      <button style="margin-bottom:10px;" class="btn btn-primary" onClick="record();">Record</button>
      <button style="margin-bottom:10px;" class="btn btn-primary" onClick="stop();">Stop</button>
      <button style="margin-bottom:10px;" class="btn btn-primary" onClick="play();">Play</button>
      <button style="margin-bottom:10px;" class="btn btn-primary" onClick="upload();" disabled>Upload</button>
      <label style="color:#FF0;" id="time">0:00</label>-->
      <div style="float:left; margin:20px;">
        	<input type="image" src="button/buttonFoto.jpg" onClick="capturePhoto();"> 
            <br/>           
       	 	<input id="record" type="image" style="margin-top:10px;" src="button/buttonMicrofono.jpg" onClick="record();">
            <br/>
            <h3 style="color:#FF0;" id="time">0:00</h3>
            <input id="play" type="image" style="margin-top:10px; visibility:hidden;" src="button/buttonPlay.png" onClick="play();">
        </div>
      <textarea  id="editor" rows="10" cols="30" style="width:620px;height:400px; float:left;">
    
    	</textarea>
        
    </div>
  <img src="images/X.png" class="chiudi" /> </div>
<!--fine box-->
</html>